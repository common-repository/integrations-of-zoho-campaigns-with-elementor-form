"use strict";(self.webpackChunk_izcef=self.webpackChunk_izcef||[]).push([[538],{1238:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(5893);function i(e){var t=e.size,a=void 0===t?14:t,i=e.stroke,s=void 0===i?3:i,l=e.className;return(0,n.jsx)("svg",{className:l,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 30 30",children:(0,n.jsx)("polyline",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:s,points:"26 15.2 4 15.2 12.38 23.69 4 15.2 12.77 6.31"})})}},5538:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var n=a(7462),i=a(7294),s=a(5637),l=a(9151),r=a(5257),o=a(4529),c=a(1238),d=a(5893);function u(e){var t,a=e.formID,u=e.campaignsConf,h=e.setCampaignsConf,m=e.step,f=e.setstep,p=e.isLoading,_=e.setIsLoading,g=e.setSnackbar,v=e.redirectLocation,C=e.isInfo,x=(0,i.useState)(!1),b=x[0],j=x[1],k=(0,i.useState)({dataCenter:"",clientId:"",clientSecret:""}),w=k[0],y=k[1],I=function(e){var t=(0,n.Z)({},u),a=(0,n.Z)({},w);a[e.target.name]="",t[e.target.name]=e.target.value,y(a),h(t)};return(0,d.jsxs)("div",{className:"btcd-stp-page",style:(0,n.Z)({},{width:1===m&&900},{height:1===m&&"auto"}),children:[(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,s.__)("Integration Name:")})}),(0,d.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:I,name:"name",value:u.name,type:"text",placeholder:(0,s.__)("Integration Name..."),disabled:C}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,s.__)("Data Center:")})}),(0,d.jsxs)("select",{onChange:I,name:"dataCenter",value:u.dataCenter,className:"btcd-paper-inp w-6 mt-1",disabled:C,children:[(0,d.jsx)("option",{value:"",children:(0,s.__)("--Select a data center--")}),(0,d.jsx)("option",{value:"com",children:"zoho.com"}),(0,d.jsx)("option",{value:"eu",children:"zoho.eu"}),(0,d.jsx)("option",{value:"com.cn",children:"zoho.com.cn"}),(0,d.jsx)("option",{value:"in",children:"zoho.in"}),(0,d.jsx)("option",{value:"com.au",children:"zoho.com.au"})]}),(0,d.jsx)("div",{style:{color:"red"},children:w.dataCenter}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,s.__)("Homepage URL:")})}),(0,d.jsx)(l.Z,{value:""+window.location.origin,className:"field-key-cpy w-6 ml-0",setSnackbar:g,readOnly:C}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,s.__)("Authorized Redirect URIs:")})}),(0,d.jsx)(l.Z,{value:v||(null==(t=izcef)||null==(t=t.api)?void 0:t.base)+"/redirect",className:"field-key-cpy w-6 ml-0",setSnackbar:g,readOnly:C}),(0,d.jsxs)("small",{className:"d-blk mt-5",children:[(0,s.__)("To get Client ID and SECRET , Please Visit")," ",(0,d.jsx)("a",{className:"btcd-link",href:"https://api-console.zoho."+((null==u?void 0:u.dataCenter)||"com")+"/",target:"_blank",rel:"noreferrer",children:(0,s.__)("Zoho API Console")})]}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,s.__)("Client id:")})}),(0,d.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:I,name:"clientId",value:u.clientId,type:"text",placeholder:(0,s.__)("Client id..."),disabled:C}),(0,d.jsx)("div",{style:{color:"red"},children:w.clientId}),(0,d.jsx)("div",{className:"mt-3",children:(0,d.jsx)("b",{children:(0,s.__)("Client secret:")})}),(0,d.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:I,name:"clientSecret",value:u.clientSecret,type:"text",placeholder:(0,s.__)("Client secret..."),disabled:C}),(0,d.jsx)("div",{style:{color:"red"},children:w.clientSecret}),!C&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("button",{onClick:function(){return(0,o.P_)(u,h,y,j,_,g)},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:b||p,children:[b?(0,s.__)("Authorized âœ”"):(0,s.__)("Authorize"),p&&(0,d.jsx)(r.Z,{size:20,clr:"#022217",className:"ml-2"})]}),(0,d.jsx)("br",{}),(0,d.jsxs)("button",{onClick:function(){setTimeout((function(){document.getElementById("btcd-settings-wrp").scrollTop=0}),300),f(2),(0,o.aS)(a,u,h,_,g)},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!b,children:[(0,s.__)("Next"),(0,d.jsx)(c.Z,{className:"ml-1 rev-icn"})]})]})]})}},4529:(e,t,a)=>{a.d(t,{P_:()=>l,Pd:()=>h,Pg:()=>u,Rx:()=>o,aS:()=>d});var n=a(7462),i=a(5637),s=a(9492),l=function(e,t,a,s,l,o){var c;if(e.dataCenter&&e.clientId&&e.clientSecret){l(!0);var d="https://accounts.zoho."+e.dataCenter+"/oauth/v2/auth?scope=ZohoCampaigns.contact.READ,ZohoCampaigns.contact.CREATE,ZohoCampaigns.contact.UPDATE&response_type=code&client_id="+e.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+(null==(c=izcef)||null==(c=c.api)?void 0:c.base)+"/redirect&state="+encodeURIComponent(window.location.href)+"/redirect",u=window.open(d,"zohoCampaigns","width=400,height=609,toolbar=off"),h=setInterval((function(){if(u.closed){clearInterval(h);var a={},c=!1,d=localStorage.getItem("__zohoCampaigns");if(d&&(c=!0,a=JSON.parse(d),localStorage.removeItem("__zohoCampaigns")),a.code&&!a.error&&a&&c){var m=(0,n.Z)({},e);m.accountServer=a["accounts-server"],r(a,m,t,s,l,o)}else{var f=a.error?"Cause: "+a.error:"";o({show:!0,msg:(0,i.__)("Authorization failed")+" "+f+". "+(0,i.__)("please try again")}),l(!1)}}}),500)}else a({dataCenter:e.dataCenter?"":(0,i.__)("Data center cann't be empty"),clientId:e.clientId?"":(0,i.__)("Client ID cann't be empty"),clientSecret:e.clientSecret?"":(0,i.__)("Secret key cann't be empty")})},r=function(e,t,a,l,r,o){var c,d=(0,n.Z)({},e);d.dataCenter=t.dataCenter,d.clientId=t.clientId,d.clientSecret=t.clientSecret,d.redirectURI=(null==(c=izcef)||null==(c=c.api)?void 0:c.base)+"/redirect",(0,s.Z)(d,"zcampaigns_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var s=(0,n.Z)({},t);s.tokenDetails=e.data,a(s),l(!0),o({show:!0,msg:(0,i.__)("Authorized Successfully")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:""+(0,i.__)("Authorization failed Cause:")+(e.data.data||e.data)+". "+(0,i.__)("please try again")}):o({show:!0,msg:(0,i.__)("Authorization failed. please try again")});r(!1)}))},o=function(e,t,a,i,s,l){var r=(0,n.Z)({},a);if(r[e.target.name]=e.target.value,"list"===e.target.name)r=c(r,t,i,s,l);i((0,n.Z)({},r))},c=function(e,t,a,i,s){var l,r=(0,n.Z)({},e);return r.field_map=[{formField:"",zohoFormField:"Contact Email"}],null!=r&&null!=(l=r.default)&&null!=(l=l.fields)&&l[r.list]||u(t,r,a,i,s),r},d=function(e,t,a,l,r){l(!0);var o={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,s.Z)(o,"zcampaigns_refresh_lists").then((function(e){if(e&&e.success){var s=(0,n.Z)({},t);e.data.lists&&(s.default=(0,n.Z)({},s.default,{lists:e.data.lists})),e.data.tokenDetails&&(s.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,i.__)("Lists refreshed")}),a((0,n.Z)({},s))}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,i.__)("Lists refresh failed Cause:")+(e.data.data||e.data)+". "+(0,i.__)("please try again")}):r({show:!0,msg:(0,i.__)("Lists refresh failed. please try again")});l(!1)})).catch((function(){return l(!1)}))},u=function(e,t,a,l,r){var o=t.list;if(o){l(!0);var c={formID:e,list:o,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,s.Z)(c,"zcampaigns_refresh_contact_fields").then((function(e){if(e&&e.success){var s=(0,n.Z)({},t);e.data.fields?(s.default.fields||(s.default.fields={}),s.default.fields[o]=e.data,e.data.tokenDetails&&(s.tokenDetails=e.data.tokenDetails),r({show:!0,msg:(0,i.__)("Contact Fields refreshed")})):r({show:!0,msg:(0,i.__)("Zoho didn't provide fields names for this list")}),e.data.tokenDetails&&(s.tokenDetails=e.data.tokenDetails),a((0,n.Z)({},s))}else r({show:!0,msg:(0,i.__)("Contact Fields refresh failed. please try again")});l(!1)})).catch((function(){return l(!1)}))}},h=function(e){return!((null!=e&&e.field_map?e.field_map.filter((function(t){var a;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(a=e.default)||null==(a=a.fields)||null==(a=a[e.list])?void 0:a.required.indexOf(t.zohoFormField))})):[]).length>0)}}}]);